webpackJsonp([7,8,9,10,14,17],{188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functions=t.constants=void 0;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.constants={fsm:{keys:{state:"state",item:"itemId",itemType:"itemType"},zones:{lounge:"lounge",control:"control"},actions:{mine:"mine",inventory:"inventory"},questions:{idElem:"idElem"},items:{asteroidSample:"asteroidSample"}},sim:{engine:{ok:"ok",overheat:"overheat",exploded:"explo"}},IO:{vId:"vId",kId:"kId"},items:{asteroidSample:"asteroidSample",element:"element",weight:"weight",stock:"stock",ship:"ship",engine:"engine",hull:"hull"},relations:{contains:"contains"},elements:{iron:{shc:20},copper:{shc:10},potassium:{shc:30},chromium:{shc:10}}},t.functions={propKid:function(e){return{kId:e}},componentTag:function(e,t){return o.default.createElement("tag",t)}}},190:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"h",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"a",function(){return l});var r="persist:",o="persist/FLUSH",i="persist/REHYDRATE",a="persist/PAUSE",s="persist/PERSIST",u="persist/PURGE",c="persist/REGISTER",l=-1},191:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return console.log("action set zone"),{type:"SET_ZONE",payload:{zone:e,state:t}}}function i(e,t){return{type:"SET_FSM_STATE",payload:{id:e,state:t}}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.setZone=o,t.setFSMState=i;t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_FSM_STATE":return console.log("action setfsm "+t.payload.id),a({},e,r({},t.payload.id,a({},e[t.payload.id],t.payload.state)));default:return e}}},192:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,r){return console.log("action addItem "+e+" type "+t+" id "+n),{type:"ADD_ITEM",payload:{container:e,type:t,id:n,item:r}}}function i(e,t,n,r){return console.log("action deleteItem "+e+" type "+t+" id "+n),{type:"DEL_ITEM",payload:{container:e,type:t,id:n,item:r}}}function a(e,t,n){return console.log("action editItem type "+e+" id "+t),{type:"EDIT_ITEM",payload:{type:e,id:t,props:n}}}function s(e,t,n){return console.log("action edit item key "+t+" val "+n),{type:"EDIT_USER_ANS",payload:{item:e,key:t,val:n}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.addItem=o,t.deleteItem=i,t.editItem=a,t.editUserAns=s;var c=n(188);t.reducer=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(t={},r(t,c.constants.items.ship,(e={},r(e,c.constants.items.engine,{id:c.constants.items.engine,element:"iron",temp:c.constants.elements.iron.shc,state:c.constants.sim.engine.ok}),r(e,c.constants.items.hull,{id:c.constants.items.hull,element:"iron",temp:c.constants.elements.iron.shc,state:c.constants.sim.engine.ok}),e)),r(t,c.constants.items.asteroidSample,{}),r(t,c.constants.items.stock,{}),t),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(o.type){case"ADD_ITEM":return console.log("items reducer add sample"),u({},n,r({},o.payload.type,u({},n[o.payload.type],r({},o.payload.id,o.payload.item))));case"DEL_ITEM":console.log("items reducer del item");var i=u({},n[o.payload.type]);return delete i[o.payload.id],u({},n,r({},o.payload.type,i));case"EDIT_ITEM":var a=o.payload.id?n[o.payload.type][o.payload.id]:n[o.payload.type],s=u({},a,o.payload.props);return o.payload.id&&(s=r({},o.payload.id,s)),console.log("edit item with props",o.payload.props),console.log("edit item = ",s),u({},n,r({},o.payload.type,u({},n[o.payload.type],s)));case"EDIT_USER_ANS":var l=u({},o.payload.item,{user:u({},o.payload.item.user,r({},o.payload.key,o.payload.val))});return u({},n,r({},o.payload.item.type,u({},n[o.payload.item.type],r({},o.payload.item.id,l))));default:return n}}},193:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=(n(13),function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return i(t,e),a(t,[{key:"handleClick",value:function(){var e={kId:this.props.kId,vId:this.props.vId};console.log("button input"),console.log(e),this.props.onInput(e)}},{key:"render",value:function(){return this.props.disabled?u.default.createElement("button",{onClick:this.handleClick,disabled:!0}," ",this.props.text):u.default.createElement("button",{onClick:this.handleClick}," ",this.props.text)}}]),t}(u.default.Component));t.default=c},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectContained=t.selectFsmState=void 0;var r=(n(265),n(188));(function(e){e&&e.__esModule})(r),t.selectFsmState=function(e,t,n){var r=e.fsm[t];return r||n},t.selectContained=function(e,t){var n=e.relations.contains[t];if(n){var r={};for(var o in n)if(n.hasOwnProperty(o)){var i=n[o],a=i.map(function(t){return e.items[o][t]});r[o]=a}return r}return{}}},196:function(e,t,n){"use strict";function r(e){return e}function o(e){return{type:"NEXT_STEP",payload:{step:e}}}function i(e){return{type:"PLAY_SIM",payload:{play:e}}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.dispatchAny=r,t.nextStep=o,t.playSim=i;t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ui:{play:!0},sim:{t:0,temp:20}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"NEXT_STEP":return a({},e,{sim:a({},e.sim,t.payload.step)});case"PLAY_SIM":return a({},e,{ui:a({},e.ui,{play:t.payload.play})});default:return e}}},197:function(e,t,n){"use strict";function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}Object.defineProperty(t,"__esModule",{value:!0}),t.guid=r},198:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){var n=void 0!==e.version?e.version:i.a,o=(e.debug,void 0===e.stateReconciler?a.a:e.stateReconciler),p=e.getStoredState||u.a,d=void 0!==e.timeout?e.timeout:f,m=null,y=!1,h=!0,v=function(e){return e._persist.rehydrated&&m&&!h&&m.update(e),e};return function(a,u){var f=a||{},b=f._persist,g=r(f,["_persist"]),_=g;if(u.type===i.e){var w=!1,O=function(t,n){w||(u.rehydrate(e.key,t,n),w=!0)};if(d&&setTimeout(function(){!w&&O(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},d),h=!1,m||(m=Object(s.a)(e)),b)return a;if("function"!=typeof u.rehydrate||"function"!=typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),p(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then(function(e){O(e)},function(e){O(void 0,e)})},function(e){O(void 0,e)}),l({},t(_,u),{_persist:{version:n,rehydrated:!1}})}if(u.type===i.f)return y=!0,u.result(Object(c.a)(e)),l({},t(_,u),{_persist:b});if(u.type===i.b)return u.result(m&&m.flush()),l({},t(_,u),{_persist:b});if(u.type===i.d)h=!0;else if(u.type===i.h){if(y)return l({},_,{_persist:l({},b,{rehydrated:!0})});if(u.key===e.key){var k=t(_,u),I=u.payload,E=!1!==o&&void 0!==I?o(I,a,k,e):k,S=l({},E,{_persist:l({},b,{rehydrated:!0})});return v(S)}}if(!b)return t(a,u);var j=t(_,u);return j===_?a:(j._persist=b,v(j))}}t.a=o;var i=n(190),a=n(238),s=n(204),u=n(205),c=n(206),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=5e3},199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getRandomItem=function(e){return e[Math.floor(e.length*Math.random())]}},200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={message:function(e){return{kId:e}},item:function(e,t){return{kId:e,item:t}},answer:function(e,t){return r({kId:e},t)}};t.default=o},201:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(32),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.signIn=n.signIn.bind(n),n.signOut=n.signOut.bind(n),n}return i(t,e),a(t,[{key:"signIn",value:function(){gapi.auth2.getAuthInstance().signIn()}},{key:"signOut",value:function(){gapi.auth2.getAuthInstance().signOut()}},{key:"render",value:function(){return this.props.gapi.gapiReady?this.props.gapi.isSignedIn?u.default.createElement("button",{onClick:this.signOut},"sign out"):u.default.createElement("button",{onClick:this.signIn},"sign in"):u.default.createElement("p",null,"google apis loading...")}}]),t}(u.default.Component),f=function(e){return{gapi:e.gapi}};t.default=(0,c.connect)(f)(l)},204:function(e,t,n){"use strict";function r(e){function t(){if(0===h.length)return v&&clearInterval(v),void(v=null);var e=h.shift(),t=c.reduce(function(t,n){return n.in(t,e,m)},m[e]);if(void 0!==t)try{y[e]=d(t)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete y[e];0===h.length&&n()}function n(){Object.keys(y).forEach(function(e){void 0===m[e]&&delete y[e]}),b=p.setItem(f,d(y)).catch(a)}function r(e){return(!u||-1!==u.indexOf(e)||"_persist"===e)&&(!s||-1===s.indexOf(e))}function a(e){}var s=e.blacklist||null,u=e.whitelist||null,c=e.transforms||[],l=e.throttle||0,f=""+(void 0!==e.keyPrefix?e.keyPrefix:i.c)+e.key,p=e.storage,d=!1===e.serialize?function(e){return e}:o,m={},y={},h=[],v=null,b=null;return{update:function(e){Object.keys(e).forEach(function(t){r(t)&&m[t]!==e[t]&&-1===h.indexOf(t)&&h.push(t)}),Object.keys(m).forEach(function(t){void 0===e[t]&&h.push(t)}),null===v&&(v=setInterval(t,l)),m=e},flush:function(){for(;0!==h.length;)t();return b||Promise.resolve()}}}function o(e){return JSON.stringify(e)}t.a=r;var i=n(190)},205:function(e,t,n){"use strict";function r(e){var t=e.transforms||[],n=""+(void 0!==e.keyPrefix?e.keyPrefix:i.c)+e.key,r=e.storage,a=(e.debug,!1===e.serialize?function(e){return e}:o);return r.getItem(n).then(function(e){if(e)try{var n={},r=a(e);return Object.keys(r).forEach(function(e){n[e]=t.reduceRight(function(t,n){return n.out(t,e,r)},a(r[e]))}),n}catch(e){throw e}})}function o(e){return JSON.parse(e)}t.a=r;var i=n(190)},206:function(e,t,n){"use strict";function r(e){var t=e.storage,n=""+(void 0!==e.keyPrefix?e.keyPrefix:i.c)+e.key;return t.removeItem(n,o)}function o(e){}t.a=r;var i=n(190)},212:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    display: flex;\n    justify-content: flex-end;\n    background-color:red;\n"],["\n    display: flex;\n    justify-content: flex-end;\n    background-color:red;\n"]),c=n(0),l=r(c),f=n(33),p=n(189),d=r(p),m=n(211),y=r(m),h=n(201),v=r(h),b=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement(g,null,l.default.createElement(y.default,{icon:"facebook"}),l.default.createElement(y.default,{icon:"twitter"}),l.default.createElement(y.default,{icon:"google"}),l.default.createElement(v.default,null))}}]),t}(l.default.Component);t.default=(0,f.withSiteData)(b);var g=d.default.div(u)},213:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),l=n(32),f=n(13),p=n(70),d=r(p),m=n(230),y=r(m),h=n(237),v=n(244),b=r(v),g=n(247),_=r(g),w=n(248);"undefined"==typeof window&&(e.window={});var O=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.persistConfig={key:e.savefile,storage:b.default,stateReconciler:_.default},n.pReducer=(0,h.persistReducer)(n.persistConfig,y.default),n.store=(0,f.createStore)(n.pReducer,{},(0,f.applyMiddleware)(d.default)),n.persistor=(0,h.persistStore)(n.store),n}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(l.Provider,{store:this.store},c.default.createElement(w.PersistGate,{loading:c.default.createElement("p",null,"persisting!"),persistor:this.persistor},this.props.children))}}]),t}(c.default.Component);t.default=O}).call(t,n(4))},223:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),l=n(261),f=r(l),p=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(f.default,null))}}]),t}(c.default.Component);t.default=p},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSample=void 0;var r=n(199),o=n(197),i=n(188);console.log("creating samples");var a=Object.keys(i.constants.elements);console.log("create sample materials",a);t.createSample=function(){var e=(0,r.getRandomItem)(a);return{id:(0,o.guid)(),type:i.constants.items.asteroidSample,element:e,weight:10*Math.random()+3,user:{element:null,weight:null}}}},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addToStock=t.createStock=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(188),t.createStock=function(e){return{id:e}},t.addToStock=function(e,t,n){var o=r({},e),i=0;return e[t]&&(i=e[t]),o[t]=i+n,console.log("addToStock",o),o}},226:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return e+":"+t+":"+n}function u(e,t){return e+"-"+t}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(213),d=r(p),m=n(197),y=n(32),h=n(212),v=r(h);"undefined"==typeof window&&(e.window={});var b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createFileWithJSONContent=function(e,t,n,r,o){var i="-------314159265358979323846",a="\r\n--"+i+"\r\n";console.log("creating file with prop gamename val "+this.props.gamename);var s={name:n,mimeType:"application/json",appProperties:{gamename:""+this.props.gamename}},u=a+"Content-Type: application/json\r\n\r\n"+JSON.stringify(s)+a+"Content-Type: application/json\r\n\r\n"+r+"\r\n---------314159265358979323846--",c="/upload/drive/v3/files",l="POST";e||(c=c+"/"+t,l="PATCH"),console.log("uploading content, method "+l+" path "+c);var f=gapi.client.request({path:c,method:l,params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/related; boundary="'+i+'"'},body:u});o||(o=function(e){console.log(e)}),f.execute(o)},n.onNewGame=n.onNewGame.bind(n),n.onLoadGame=n.onLoadGame.bind(n),n.getLocalFiles=n.getLocalFiles.bind(n),n.listSaveFiles=n.listSaveFiles.bind(n),n.state={filename:null,id:null,local:{},driveChecked:!1,drive:["still searching for files"],driveSave:null,synced:!1},n}return a(t,e),c(t,[{key:"componentDidMount",value:function(){this.getLocalFiles()}},{key:"componentDidUpdate",value:function(e,t){this.props.gapi.isSignedIn&&!this.state.synced&&this.loadGame()}},{key:"saveGame",value:function(){var e=window.localStorage;this.listSaveFiles().then(function(t){var n=t.result.files;if(console.log("saveGame response",t),console.log("saving game, drive files found: "+n.length),n&&n.length>0){var r=n[0].id,o=e.getItem("persist:g4-35d7c7bc-8d4d-0686-55f7-29e91a41175e");this.createFileWithJSONContent(!1,r,"anogamesave",o,function(e){console.log("create file with json callback",e)})}else{var i=e.getItem("persist:g4-5379725d-ceec-8070-1176-612b1a9d5b06");this.createFileWithJSONContent(!0,null,"anogamesave",i,function(e){console.log("create file with json callback",e)})}}.bind(this))}},{key:"listSaveFiles",value:function(){return gapi.client.drive.files.list({q:"appProperties has { key='gamename' and value='"+this.props.gamename+"' }",fields:"files(id, name, mimeType, modifiedTime)"})}},{key:"getFile",value:function(e){return gapi.client.drive.files.get({fileId:e,alt:"media",fields:"id, name, mimeType, modifiedTime"})}},{key:"loadGame",value:function(){var e=window.localStorage;this.listSaveFiles().then(function(t){var n=this,r=t.result.files;if(console.log("loadGame response",t),console.log("loadinggame, drive files found: "+r.length),r&&r.length>0){var o=(r[0].modifiedTime,e.getItem("g4:35d7c7bc-8d4d-0686-55f7-29e91a41175e:date"),r[0].id);this.getFile(o).then(function(t){console.log("get file result",t),console.log("file body",t.body),console.log("file result",t.result);e.setItem("persist:drive",t.body);n.setState({synced:!0})}).catch(function(e){console.log("fet file error",e)})}}.bind(this))}},{key:"getAppData",value:function(){console.log("getting app data from drive"),console.log("drive",gapi.client.drive);gapi.client.drive.files.list({spaces:"appDataFolder",fields:"nextPageToken, files(id, name)",pageSize:100}).then(function(e){console.log("app data result",e)}).catch(function(e){console.log("app data error",e)})}},{key:"getLocalFiles",value:function(){var e=this,t=window.localStorage,n=new RegExp("("+this.props.gamename+":)"),r=[];for(var o in t)t.hasOwnProperty(o)&&o.match(n)&&r.push({key:o,val:t.getItem(o)});var i=r.map(function(e){return e.key.split(":")[1]}),a={};i.map(function(n){a[n]||(a[n]={date:t.getItem(s(e.props.gamename,n,"date")),desc:t.getItem(s(e.props.gamename,n,"desc"))})}),this.setState({local:a}),console.log("local meta",a)}},{key:"renderLoadGame",value:function(){var e=this;return this.state.synced?f.default.createElement("button",{onClick:function(){e.setState({filename:"drive"})}},"load game"):f.default.createElement("button",{disabled:!0},"load game")}},{key:"renderNewGame",value:function(){var e=this;return f.default.createElement("button",{onClick:function(){e.onNewGame()}},"New Game")}},{key:"renderSaves",value:function(){var e=this;if(this.state.local)return Object.keys(this.state.local).map(function(t,n){var r=e.state.local[t];return f.default.createElement("button",{onClick:function(){e.onLoadGame(t)}},"save ",n," date: ",r.date,", desc: ",r.desc)})}},{key:"renderDriveSave",value:function(){return this.state.driveSave?f.default.createElement("p",null,"drive save found"):f.default.createElement("p",null,"waiting for drive save...")}},{key:"onNewGame",value:function(){var e=(0,m.guid)(),t=u(this.props.gamename,e);console.log("new game name: "+t);var n=window.localStorage;n.setItem(s(this.props.gamename,e,"date"),"Sunday 2:21am"),n.setItem(s(this.props.gamename,e,"desc"),"hello world"),this.setState({filename:t,id:e})}},{key:"onLoadGame",value:function(e){var t=u(this.props.gamename,e);console.log("load game name: "+t),this.setState({filename:t,fileid:e})}},{key:"render",value:function(){var e=this;return this.state.filename?f.default.createElement(d.default,{savefile:this.state.filename},this.props.children):f.default.createElement("div",null,f.default.createElement(v.default,null),f.default.createElement("button",{onClick:function(){e.saveGame()}},"save game to drive"),this.renderLoadGame(),f.default.createElement("hr",null),this.renderNewGame(),f.default.createElement("hr",null),this.renderSaves(),f.default.createElement("hr",null),this.renderDriveSave(),f.default.createElement("hr",null),this.state.drive.map(function(e){return f.default.createElement("p",null,e)}))}}]),t}(f.default.Component),g=function(e){return{gapi:e.gapi}};t.default=(0,y.connect)(g)(b)}).call(t,n(4))},230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(231),i=n(191),a=n(192),s=n(232),u=n(196),c=n(233),l=(0,r.combineReducers)({simulation:u.reducer,game:o.reducer,fsm:i.reducer,items:a.reducer,relations:s.reducer}),f=function(e,t){var n=(0,c.parentReducer)(e,t);return l(n,t)};t.default=f},231:function(e,t,n){"use strict";function r(e,t){return{type:"SET_HEALTH",payload:{time:e,temp:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0,t.setHealth=r;var o=n(188);t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{health:100,zone:o.constants.fsm.zones.lounge};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,e}},232:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var o=n(188);t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r({},o.constants.relations.contains,r({},o.constants.fsm.zones.control,r({},o.constants.items.ship,[o.constants.items.engine,o.constants.items.hull])));return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,e}},233:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.moveItem=t.parentReducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(n(234),n(188));t.parentReducer=function(e,t){switch(t.type){case"ADD_ITEM":var n=e.relations[a.constants.relations.contains][t.payload.container]?e.relations[a.constants.relations.contains][t.payload.container]:{},s=n[t.payload.type]?n[t.payload.type]:[];if(s.indexOf(t.payload.id)<=-1)return i({},e,{relations:r({},a.constants.relations.contains,i({},e.relations[a.constants.relations.contains],r({},t.payload.container,i({},n,r({},t.payload.type,[].concat(o(s),[t.payload.id]))))))});break;case"DEL_ITEM":var u=e.relations[a.constants.relations.contains][t.payload.container],c=u[t.payload.type].filter(function(e){if(e!=t.payload.id)return e});return i({},e,{relations:r({},a.constants.relations.contains,i({},e.relations[a.constants.relations.contains],r({},t.payload.container,i({},u,r({},t.payload.type,c)))))});case"MOVE_ITEM":console.log("parent reducer move item");break;case"SET_ZONE":return i({},e,{fsm:i({},e.fsm,r({},t.payload.zone,{state:t.payload.state})),game:i({},e.game,{zone:t.payload.zone})});default:return e}return e},t.moveItem=function(e,t,n){return{type:"MOVE_ITEM",payload:{from:e,to:t,item:n}}}},234:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return{type:"ADD_SAMPLE",payload:{sample:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.addSample=o;var a=n(235),s=n(236),u=(0,s.createAsteroid)();t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r({},a.constants.inventory.items,r({},a.constants.mine.samples,r({},u.sample.id,u.sample))),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_SAMPLE":return i({},e,r({},a.constants.inventory.items,r({},a.constants.mine.samples,i({},e.inventory.samples,r({},t.payload.sample.id,t.payload.sample)))));default:return e}}},235:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t.constants={input:{kId:"kId",vId:"vId"},store:{state:"state"},names:{lounge:"lounge"},types:{zones:"zones",actions:"actions",questions:"questions"},zones:{lounge:"lounge",control:"control"},questions:{read:"read"},actions:{mine:"mine",inventory:"inventory"},read:{q1:"q1"},mine:{samples:"samples"},inventory:{items:"items"},logTypes:{action:"action",answer:"answer"}};t.messages={changeZone:function(e,t){var n;return n={},r(n,i.input.vId,e),r(n,"changeFrom",function(e){return{to:t,from:e}}),n},toFSMState:function(e,t){return{id:e,state:t}},zone:function(e){return r({},i.input.vId,e)},action:function(e){return r({},i.input.vId,e)},output:function(e,t){return o(r({},i.input.vId,e),t)}}},236:function(e,t,n){"use strict";function r(){var e=["iron","magnesium","copper","silver"],t=(0,o.getRandomItem)(e);return{description:"it is a "+t+" asteroid",sample:{id:(0,i.guid)(),name:"unknown sample",game:{weight:10*Math.random()+5,element:t},user:{weight:null,element:null}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createAsteroid=r;var o=n(199),i=n(197)},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(198);n.d(t,"persistReducer",function(){return r.a});var o=n(239);n.d(t,"persistCombineReducers",function(){return o.a});var i=n(241);n.d(t,"persistStore",function(){return i.a});var a=n(242);n.d(t,"createMigrate",function(){return a.a});var s=n(243);n.d(t,"createTransform",function(){return s.a});var u=n(205);n.d(t,"getStoredState",function(){return u.a});var c=n(204);n.d(t,"createPersistoid",function(){return c.a});var l=n(206);n.d(t,"purgeStoredState",function(){return l.a});var f=n(190);n.d(t,"KEY_PREFIX",function(){return f.c}),n.d(t,"FLUSH",function(){return f.b}),n.d(t,"REHYDRATE",function(){return f.h}),n.d(t,"PAUSE",function(){return f.d}),n.d(t,"PERSIST",function(){return f.e}),n.d(t,"PURGE",function(){return f.f}),n.d(t,"REGISTER",function(){return f.g}),n.d(t,"DEFAULT_VERSION",function(){return f.a})},238:function(e,t,n){"use strict";function r(e,t,n,r){var a=(r.debug,i({},n));return e&&"object"===(void 0===e?"undefined":o(e))&&Object.keys(e).forEach(function(r){"_persist"!==r&&t[r]===n[r]&&(a[r]=e[r])}),a}t.a=r;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},239:function(e,t,n){"use strict";function r(e,t){return e.stateReconciler=void 0===e.stateReconciler?a.a:e.stateReconciler,Object(i.a)(e,Object(o.combineReducers)(t))}t.a=r;var o=n(13),i=n(198),a=n(240)},240:function(e,t,n){"use strict";function r(e,t,n,r){var s=(r.debug,a({},n));return e&&"object"===(void 0===e?"undefined":i(e))&&Object.keys(e).forEach(function(r){if("_persist"!==r&&t[r]===n[r])return o(n[r])?void(s[r]=a({},s[r],e[r])):void(s[r]=e[r])}),s}function o(e){return null!==e&&!Array.isArray(e)&&"object"===(void 0===e?"undefined":i(e))}t.a=r;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},241:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){var r=n||!1,o=Object(i.createStore)(c,u,t?t.enhancer:void 0),l=function(e){o.dispatch({type:a.g,key:e})},f=function(t,n,i){var s={type:a.h,payload:n,err:i,key:t};e.dispatch(s),o.dispatch(s),r&&p.getState().bootstrapped&&(r(),r=!1)},p=s({},o,{purge:function(){var t=[];return e.dispatch({type:a.f,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:a.b,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:a.d})},persist:function(){e.dispatch({type:a.e,register:l,rehydrate:f})}});return p.persist(),p}t.a=o;var i=n(13),a=(n(198),n(190)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u={registry:[],bootstrapped:!1},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case a.g:return s({},e,{registry:[].concat(r(e.registry),[t.key])});case a.h:var n=e.registry.indexOf(t.key),o=[].concat(r(e.registry));return o.splice(n,1),s({},e,{registry:o,bootstrapped:0===o.length});default:return e}}},242:function(e,t,n){"use strict";function r(e,t){return function(t,n){if(!t)return Promise.resolve(void 0);var r=t._persist&&void 0!==t._persist.version?t._persist.version:o.a;if(r===n)return Promise.resolve(t);if(r>n)return Promise.resolve(t);var i=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return n>=e&&e>r}).sort(function(e,t){return e-t});try{var a=i.reduce(function(t,n){return e[n](t)},t);return Promise.resolve(a)}catch(e){return Promise.reject(e)}}}t.a=r;var o=n(190)},243:function(e,t,n){"use strict";function r(e,t){function n(e){return!(!o||-1!==o.indexOf(e))||!(!i||-1===i.indexOf(e))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.whitelist||null,i=r.blacklist||null;return{in:function(t,r,o){return!n(r)&&e?e(t,r,o):t},out:function(e,r,o){return!n(r)&&t?t(e,r,o):e}}}t.a=r},244:function(e,t,n){"use strict";t.__esModule=!0;var r=n(245),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=(0,o.default)("local")},245:function(e,t,n){"use strict";function r(e){var t=(0,i.default)(e);return{getItem:function(e){return new Promise(function(n,r){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(r,o){r(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,r){n(t.removeItem(e))})}}}t.__esModule=!0,t.default=r;var o=n(246),i=function(e){return e&&e.__esModule?e:{default:e}}(o)},246:function(e,t,n){"use strict";function r(){}function o(e){if("object"!==("undefined"==typeof self?"undefined":a(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist "+e+" test";t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}function i(e){var t=e+"Storage";return o(t)?self[t]:s}t.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var s={getItem:r,setItem:r,removeItem:r}},247:function(e,t,n){"use strict";function r(e,t,n,r){var s=(r.debug,a({},n));return e&&"object"===(void 0===e?"undefined":i(e))&&Object.keys(e).forEach(function(r){if("_persist"!==r&&t[r]===n[r])return o(n[r])?void(s[r]=a({},s[r],e[r])):void(s[r]=e[r])}),s}function o(e){return null!==e&&!Array.isArray(e)&&"object"===(void 0===e?"undefined":i(e))}t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r},248:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.PersistGate=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0);!function(e){e&&e.__esModule}(s);(t.PersistGate=function(e){function t(){var e,n,i,a;r(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.state={bootstrapped:!1},i.handlePersistorState=function(){i.props.persistor.getState().bootstrapped&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).then(function(){return i.setState({bootstrapped:!0})}).catch(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())},a=n,o(i,a)}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(s.PureComponent)).defaultProps={loading:null}},253:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),l=n(226),f=r(l),p=n(223),d=r(p);"undefined"==typeof window&&(e.window={});var m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement(f.default,{gamename:"g4"},c.default.createElement(d.default,{game:this.props.game}))}}]),t}(c.default.Component);t.default=m}).call(t,n(4))},261:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),l=n(262),f=r(l),p=n(272),d=(r(p),n(274)),m=(r(d),n(275)),y=(r(m),function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(f.default,null))}}]),t}(c.default.Component));t.default=y},262:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=r(u),l=n(263),f=r(l),p=n(32),d=(n(13),function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log("game props"),console.log(e),n.getFSM=n.getFSM.bind(n),n.state={},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.getFSM(this.props.zone)}},{key:"componentWillUpdate",value:function(e,t){if(console.log("component will update, is there a different zone? "+(e.zone!==t.fsm.id)),e.zone!==t.fsm.id){var n=e.zone;this.getFSM(n)}}},{key:"getFSM",value:function(e){var t=(0,f.default)(e);this.setState({fsm:t})}},{key:"renderFSM",value:function(){if(this.state.fsm)return c.default.createElement(this.state.fsm.component,{id:this.state.fsm.id,showEntry:!1,factory:f.default})}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("p",null,"current zone: ",this.props.zone),this.renderFSM())}}]),t}(c.default.Component)),m=function(e,t){return{zone:e.game.zone}};t.default=(0,p.connect)(m)(d)},263:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(264),i=r(o),a=n(266),s=r(a),u=n(267),c=r(u),l=n(268),f=r(l),p=n(269),d=r(p),m=n(270),y=r(m),h=n(271),v=r(h);t.default=function(e){switch(console.log("factory name "+e+" engine name: "+v.id),e){case s.id:return s;case i.id:return i;case c.id:return c;case f.id:return f;case d.id:return d;case y.id:return y;case v.id:return v}}},264:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.Lounge=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(188),g=t.id="lounge",_=t.Lounge=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("lounge constructor, props:"),console.log(e),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if(console.log("lounge recieved input state: "),console.log(e),"e1"===e[b.constants.IO.kId])this.props.setZone(g,"in");else switch(this.props.fsm.state){case"inv":"inv"===e[b.constants.IO.kId]&&this.props.setFSMState(g,o({},b.constants.fsm.keys.state,"in"));break;case"in":default:"inv"===e[b.constants.IO.kId]&&this.props.setFSMState(g,o({},b.constants.fsm.keys.state,"inv"))}}},{key:"renderView",value:function(){if(console.log("lounge render view: "),console.log(this.props),this.props.showEntry)return[f.default.createElement("div",null,"entry to lounge",f.default.createElement(d.default,{kId:"e1",onInput:this.onInput,text:"go to lounge"}))];switch(this.props.fsm.state){case"inv":var e=this.props.factory(b.constants.fsm.actions.inventory);return[f.default.createElement(e.component,u({showEntry:!1,factory:this.props.factory,onInput:this.onInput},b.functions.propKid("inv")))];case"in":default:var t=this.props.factory("control"),n=this.props.factory(b.constants.fsm.actions.inventory);return[f.default.createElement("div",null,"inside lounge",f.default.createElement(t.component,u({showEntry:!0,factory:this.props.factory,onInput:this.onInput},b.functions.propKid("ic"))),f.default.createElement(n.component,u({showEntry:!0,factory:this.props.factory,onInput:this.onInput},b.functions.propKid("inv"))))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),w=function(e){return(0,h.bindActionCreators)({setZone:v.setZone,setFSMState:v.setFSMState},e)},O=function(e,t){return{fsm:(0,m.selectFsmState)(e,g,o({},b.constants.fsm.keys.state,"in"))}};t.component=(0,y.connect)(O,w)(_)},265:function(e,t,n){"use strict";function r(e,t){return e===t}function o(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return o(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var s=0,u=r.pop(),c=a(r),l=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(n)),f=i(function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return l.apply(null,e)});return f.resultFunc=u,f.recomputations=function(){return s},f.resetRecomputations=function(){return s=0},f}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=s,t.createStructuredSelector=u;var c=t.createSelector=s(i)},266:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(192),g=n(188),_=(n(199),t.id="control"),w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("control constructor"),console.log(e),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if("e1"===e.kId)this.props.setZone(_,"in");else switch(this.props.fsm.state){case"in":if("mine"===e.kId)this.props.setZone(_,"mine");else if(e.kId===g.constants.items.engine||e.kId===g.constants.items.hull){console.log("input, updating engine material to "+e.vId);var t=g.constants.elements[e.vId].shc;this.props.editItem(g.constants.items.ship,e.kId,{temp:t,element:e.vId})}break;case"mine":"mine"===e.kId&&this.props.setFSMState(_,o({},g.constants.fsm.keys.state,"in"))}}},{key:"renderShip",value:function(){var e=this.props.factory(g.constants.items.engine);return console.log("factory view fsm engine",e),f.default.createElement(e.component,u({showEntry:!1,factory:this.props.factory,onInput:this.onInput},g.functions.propKid("mine")))}},{key:"renderView",value:function(){if(this.props.showEntry)return[f.default.createElement("div",null,f.default.createElement(d.default,{kId:"e1",onInput:this.onInput,text:"go to control"}))];switch(this.props.fsm.state){case"mine":var e=this.props.factory(g.constants.fsm.actions.mine);return[f.default.createElement(e.component,u({showEntry:!1,factory:this.props.factory,onInput:this.onInput},g.functions.propKid("mine")))];case"in":default:var t=this.props.factory(g.constants.items.engine);console.log("engine view ",t);var n=this.props.factory("lounge");console.log("lounge view ",n);var r=this.props.factory(g.constants.fsm.actions.mine);return[f.default.createElement("div",null,"inside control room",f.default.createElement(t.component,u({showEntry:!0,factory:this.props.factory,onInput:this.onInput},g.functions.propKid("mine"))),f.default.createElement(n.component,u({showEntry:!0,factory:this.props.factory,onInput:this.onInput},g.functions.propKid("l1"))),f.default.createElement(r.component,u({showEntry:!0,factory:this.props.factory,onInput:this.onInput},g.functions.propKid("mine"))))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),O=function(e){return(0,h.bindActionCreators)({setZone:v.setZone,setFSMState:v.setFSMState,editUserAns:b.editUserAns,editItem:b.editItem},e)},k=function(e,t){return{fsm:(0,m.selectFsmState)(e,_,o({},g.constants.fsm.keys.state,"in")),items:(0,m.selectContained)(e,t.id)}},I=t.component=(0,y.connect)(k,O)(w);t.default=I},267:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(224),g=n(192),_=n(200),w=r(_),O=n(188),k=t.id="mine",I=null,E=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if("e1"===e.kId)I=(0,b.createSample)(),this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"in")),this.props.onInput(w.default.message(this.props.kId));else switch(this.props.fsm.state){case"in":"mine"===e.kId?(this.props.addItem(O.constants.fsm.actions.inventory,I.type,I.id,I),this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"fin")),I=(0,b.createSample)()):"look"===e.kId?(I=(0,b.createSample)(),this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"in"))):"back"===e.kId&&this.props.onInput(w.default.message(this.props.kId));break;case"fin":"in"===e.kId&&this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"in"))}}},{key:"renderView",value:function(){if(this.props.showEntry)return[f.default.createElement("div",null,f.default.createElement(d.default,u({},O.functions.propKid("e1"),{onInput:this.onInput,text:"mine asteroids"})))];switch(this.props.fsm.state){case"fin":return[f.default.createElement("p",null,"asteroid sample added to inventory"),f.default.createElement(d.default,u({},O.functions.propKid("in"),{onInput:this.onInput,text:"next"}))];case"in":default:return[f.default.createElement("p",null,"there is a "+(I.weight>8?"large":"small")+" asteroid in front of you, mine it?"),f.default.createElement("div",null,f.default.createElement(d.default,u({},O.functions.propKid("mine"),{onInput:this.onInput,text:"mine it"})),f.default.createElement(d.default,u({},O.functions.propKid("look"),{onInput:this.onInput,text:"look for another"})),f.default.createElement(d.default,u({},O.functions.propKid("back"),{onInput:this.onInput,text:"back"})))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),S=function(e){return(0,h.bindActionCreators)({setFSMState:v.setFSMState,addItem:g.addItem},e)},j=function(e,t){return{fsm:(0,m.selectFsmState)(e,k,o({},O.constants.fsm.keys.state,"in"))}},P=t.component=(0,y.connect)(j,S)(E);t.default=P},268:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(200),g=r(b),_=n(188),w=t.id="inventory",O=null,k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("inventory constructor"),console.log(e),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if("e1"===e.kId)this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"in")),this.props.onInput(g.default.message(this.props.kId));else switch(this.props.fsm.state){case"in":if("back"===e.kId)this.props.onInput(g.default.message(this.props.kId));else if("sample"===e.kId){e.item;this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"sample"))}else O=e.kId,this.setState({item:item});break;case"sample":"sample"===e.kId&&this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"in"))}}},{key:"renderItems",value:function(){var e=this;return Object.keys(this.props.items).map(function(t,n){return e.props.items[t].map(function(n,r){if(!n)return f.default.createElement("div",null,"item undefined");if(t===_.constants.items.asteroidSample){var o=e.props.factory(t);return f.default.createElement("div",null,0==r?f.default.createElement("p",null,t):"",f.default.createElement(o.component,{item:n,showEntry:!0,factory:e.props.factory,onInput:e.onInput,kId:"sample"}))}return t===_.constants.items.stock?f.default.createElement("div",null,0==r?f.default.createElement("p",null,t):"",f.default.createElement("p",null,f.default.createElement("span",null,"element: ",n.id),Object.keys(n).map(function(e){if("id"!=e)return f.default.createElement("span",null," ",e," weight:",n[e])}))):void 0})})}},{key:"renderView",value:function(){if(this.props.showEntry)return[f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("e1"),{onInput:this.onInput,text:"inspect inventory"})))];switch(this.props.fsm.state){case"sample":var e=this.props.factory(_.constants.fsm.items.asteroidSample);return[f.default.createElement(e.component,u({showEntry:!1,factory:this.props.factory,onInput:this.onInput},_.functions.propKid("sample")))];case"in":default:return[f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("back"),{onInput:this.onInput,text:"back"}))),f.default.createElement("div",null,this.renderItems())]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),I=function(e){return(0,h.bindActionCreators)({setFSMState:v.setFSMState},e)},E=function(e,t){return console.log("mapping asteroid samples"),console.log(e),{fsm:(0,m.selectFsmState)(e,w,o({},_.constants.fsm.keys.state,"in")),items:(0,m.selectContained)(e,w)}},S=t.component=(0,y.connect)(E,I)(k);t.default=S},269:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(200),g=r(b),_=n(188),w=t.id="idElem",O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("IdElem constructor ",e),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if("e1"===e[_.constants.IO.kId])this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"in")),this.props.onInput(g.default.message(this.props.kId));else switch(this.props.fsm.state){case"in":"flame"===e[_.constants.IO.kId]?this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"flame")):"sonar"===e[_.constants.IO.kId]?this.props.setFSMState(w,o({},_.constants.fsm.keys.state,"sonar")):"back"===e[_.constants.IO.kId]&&this.props.onInput(g.default.message(this.props.kId));break;case"flame":case"sonar":this.props.onInput(g.default.answer(this.props.kId,{element:e.vId}))}}},{key:"renderView",value:function(){if(this.props.showEntry){var e="element: "+(this.props.item.user.element?this.props.item.user.element:"unknown");return[f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("e1"),{onInput:this.onInput,text:e})))]}switch(this.props.fsm.state){case"sonar":return[f.default.createElement("p",null,"The sample emites a soundwave of 370Hz"),f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("sonar"),{vId:"magnesium",onInput:this.onInput,text:"magnesium"})),f.default.createElement(d.default,u({},_.functions.propKid("sonar"),{vId:"lithium",onInput:this.onInput,text:"lithium"})))];case"flame":return[f.default.createElement("p",null,"The flame is blue, therefore the sample is made of:"),f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("flame"),{vId:"iron",onInput:this.onInput,text:"iron"})),f.default.createElement(d.default,u({},_.functions.propKid("flame"),{vId:"copper",onInput:this.onInput,text:"copper"})))];case"in":default:return[f.default.createElement("p",null,"The sample element is "+this.props.item.type+" id:"+this.props.item.id),f.default.createElement("div",null,f.default.createElement(d.default,u({},_.functions.propKid("flame"),{onInput:this.onInput,text:"use flame test"})),f.default.createElement(d.default,u({},_.functions.propKid("sonar"),{onInput:this.onInput,text:"use sonar test"})),f.default.createElement(d.default,u({},_.functions.propKid("back"),{onInput:this.onInput,text:"back"})))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),k=function(e){return(0,h.bindActionCreators)({setFSMState:v.setFSMState},e)},I=function(e,t){return{fsm:(0,m.selectFsmState)(e,w,o({},_.constants.fsm.keys.state,"in"))}},E=t.component=(0,y.connect)(I,k)(O);t.default=E},270:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(193),d=r(p),m=n(194),y=n(32),h=n(13),v=n(191),b=n(192),g=n(225),_=n(200),w=r(_),O=n(188),k=t.id=O.constants.fsm.items.asteroidSample,I=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("AstSamp constructor"),console.log(e),n}return s(t,e),c(t,[{key:"onInput",value:function(e){if("e1"===e.kId)if(this.props.item){var t;this.props.setFSMState(k,(t={},o(t,O.constants.fsm.keys.state,"in"),o(t,O.constants.fsm.keys.item,this.props.item.id),o(t,O.constants.fsm.keys.itemType,this.props.item.type),t)),this.props.onInput(w.default.item(this.props.kId,this.props.item))}else console.log("error, no item in asteroid sample onInput entry");else switch(this.props.fsm.state){case"in":if("aid"===e.kId)this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"aid"));else if("back"===e.kId)this.props.onInput(w.default.message(this.props.kId));else if("stock"===e.kId){var n=this.props.item,r=this.props.stocks[n.user.element];r||(r=(0,g.createStock)(n.user.element)),r=(0,g.addToStock)(r,n.element,n.weight),this.props.addItem(O.constants.fsm.actions.inventory,O.constants.items.stock,n.user.element,r),this.props.deleteItem(O.constants.fsm.actions.inventory,O.constants.items.asteroidSample,n.id,n),this.props.onInput(w.default.message(this.props.kId))}break;case"aid":var i=e.element;this.props.editUserAns(this.props.item,O.constants.items.element,i),this.props.setFSMState(k,o({},O.constants.fsm.keys.state,"in"))}}},{key:"renderView",value:function(){if(!this.props.item)return f.default.createElement("p",null,"Waiting for item...");if(this.props.showEntry){var e="item: element: "+(this.props.item.user.element?this.props.item.user.element:"unknown");return[f.default.createElement(d.default,u({},O.functions.propKid("e1"),{onInput:this.onInput,text:e}))]}switch(this.props.fsm.state){case"aid":var t=this.props.factory(O.constants.fsm.questions.idElem);return[f.default.createElement(t.component,u({item:this.props.item,showEntry:!1,factory:this.props.factory,onInput:this.onInput},O.functions.propKid("aid")))];case"in":default:var n=this.props.factory(O.constants.fsm.questions.idElem);return[f.default.createElement("p",null,"asteroid sample: ",this.props.item.id,":",f.default.createElement(n.component,u({item:this.props.item,showEntry:!0,factory:this.props.factory,onInput:this.onInput},O.functions.propKid("aid"))),"weight: ",this.props.item.user.weight?this.props.item.user.weight:"unknown"),f.default.createElement(d.default,u({},O.functions.propKid("stock"),{onInput:this.onInput,text:"add to stock",disabled:!this.props.item.user.element})),f.default.createElement(d.default,u({},O.functions.propKid("back"),{onInput:this.onInput,text:"back"}))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(f.default.Component),E=function(e){return(0,h.bindActionCreators)({setFSMState:v.setFSMState,editUserAns:b.editUserAns,addItem:b.addItem,deleteItem:b.deleteItem},e)},S=function(e,t){var n=(0,m.selectFsmState)(e,O.constants.fsm.items.asteroidSample,o({},O.constants.fsm.keys.state,"in")),r=n[O.constants.fsm.keys.item],i=n[O.constants.fsm.keys.itemType];return{fsm:n,item:t.item?t.item:r?e.items[i][r]:null,stocks:e.items[O.constants.items.stock]}},j=t.component=(0,y.connect)(S,E)(I);t.default=j},271:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(32),l=n(13),f=n(188),p=(t.id=f.constants.items.engine,function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),a(t,[{key:"renderView",value:function(){console.log("rendering engine view, state: "+this.props.engine.state);var e="the engine is running at "+this.props.engine.temp;return this.props.engine.state===f.constants.sim.engine.overheat?u.default.createElement("p",null,e,". It's overheating"):this.props.engine.state===f.constants.sim.engine.exploded?u.default.createElement("p",null,"The engine has exploded, it's not working"):u.default.createElement("p",null,e,". The engine is running within its tolerant range")}},{key:"render",value:function(){return this.renderView()}}]),t}(u.default.Component)),d=function(e){return(0,l.bindActionCreators)({},e)},m=function(e,t){return{engine:e.items.ship.engine}};t.component=(0,c.connect)(m,d)(p)},272:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(32),l=n(13),f=n(196),p=n(192),d=n(273),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.update=n.update.bind(n),n.play=n.play.bind(n),n.pause=n.pause.bind(n),n.state={interval:null},n}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.play()}},{key:"componentWillUnmount",value:function(){this.pause()}},{key:"componentDidUpdate",value:function(e,t){e.play!=this.props.play&&(this.props.play?this.play():this.pause())}},{key:"play",value:function(){if(!this.state.interval&&this.props.play){var e=setInterval(this.update,1e3);this.setState({interval:e})}}},{key:"pause",value:function(){this.state.interval&&(clearInterval(this.state.interval),this.setState({interval:null}))}},{key:"update",value:function(){var e=this;console.log("simulation updating");var t=(0,d.update)(this.props.state);console.log("update actions",t),t.map(function(t){e.props.dispatchAny(t)})}},{key:"render",value:function(){return null}}]),t}(u.default.Component),y=function(e){return(0,l.bindActionCreators)({dispatchAny:f.dispatchAny,editItem:p.editItem},e)},h=function(e){return console.log("map sim state"),console.log(e),{state:{sim:e.simulation.sim,items:e.items},play:e.simulation.ui.play}};t.default=(0,c.connect)(h,y)(m)},273:function(e,t,n){"use strict";function r(e){var t=[],n=e.items[a.constants.items.ship][a.constants.items.engine],r=e.sim.temp;return console.log("updateShip engine temp = "+n.temp+" sim temp = "+r),n.temp<r?t.push((0,u.editItem)(a.constants.items.ship,a.constants.items.engine,{state:a.constants.sim.engine.exploded})):n.temp<r-10&&t.push((0,u.editItem)(a.constants.items.ship,a.constants.items.engine,{state:a.constants.sim.engine.overheat})),t}function o(e,t){var n=e.sim.t;return t.t=n+1,t}function i(e,t){var n=e.sim.temp;return t.temp=n+Math.random(),t}Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;var a=n(188),s=n(196),u=n(192);t.update=function(e){console.log("simulation state",e);var t={},n=[];t=o(e,t),t=i(e,t),n.push((0,s.nextStep)(t));var a=r(e);return n=n.concat(a),console.log("update actions after ship",n),n}},274:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(32),l=n(13),f=n(196),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleInput=n.handleInput.bind(n),n}return i(t,e),a(t,[{key:"handleInput",value:function(e){console.log("handle click input, play  "+e),this.props.playSim(e)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",null,u.default.createElement("button",{onClick:function(){e.handleInput(!0)}},"play"),u.default.createElement("button",{onClick:function(){e.handleInput(!1)}},"pause"))}}]),t}(u.default.Component),d=function(e){return{play:e.simulation.ui.play}},m=function(e){return(0,l.bindActionCreators)({playSim:f.playSim},e)};t.default=(0,c.connect)(d,m)(p)},275:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(32),l=n(13),f=n(224),p=n(188),d=n(192),m=n(225),y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"componentDidMount",value:function(){if(console.log("initialization beginning"),Object.keys(this.props.state.items[p.constants.items.asteroidSample]).length<3){console.log("initializaing asteroid samples");for(var e=void 0,t=0;t<3;t++)e=this.props.createSample(),this.props.addItem(p.constants.fsm.actions.inventory,p.constants.items.asteroidSample,e.id,e);var n=(0,m.createStock)(e.element);n=(0,m.addToStock)(n,e.element,e.weight),this.props.addItem(p.constants.fsm.actions.inventory,p.constants.items.stock,e.element,n),this.props.deleteItem(p.constants.fsm.actions.inventory,p.constants.items.asteroidSample,e.id,e)}}},{key:"render",value:function(){return null}}]),t}(u.default.Component),h=function(e){return(0,l.bindActionCreators)({createSample:f.createSample,addItem:d.addItem,deleteItem:d.deleteItem},e)},v=function(e){return{state:e}};t.default=(0,c.connect)(v,h)(y)}});