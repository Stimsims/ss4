webpackJsonp([7,8],{187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={fsm:{keys:{state:"state",item:"itemId",itemType:"itemType"},zones:{lounge:"lounge",control:"control"},actions:{mine:"mine",inventory:"inventory"},questions:{idElem:"idElem"},items:{asteroidSample:"asteroidSample"}},IO:{vId:"vId",kId:"kId"},items:{asteroidSample:"asteroidSample",element:"element",weight:"weight"}};t.default=o},189:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return console.log("action set zone"),{type:"SET_ZONE",payload:{zone:e,state:t}}}function a(e,t){return{type:"SET_FSM_STATE",payload:{id:e,state:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.setZone=r,t.setFSMState=a;var u=n(187);(function(e){e&&e.__esModule})(u),t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_FSM_STATE":return console.log("action setfsm "+t.payload.id),i({},e,o({},t.payload.id,i({},e[t.payload.id],t.payload.state)));default:return e}}},190:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){var e=this;return s.default.createElement("button",{onClick:function(){e.props.onInput({vId:e.props.vId})}},this.props.text)}}]),t}(s.default.Component);t.default=l},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFsmState=void 0;var o=(n(234),n(187));(function(e){e&&e.__esModule})(o),t.selectFsmState=function(e,t,n){console.log("selectFsm "+t),console.log(e);var o=e.fsm[t];return o||n}},193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r={message:function(e){return{vId:e}},item:function(e,t){return{vId:e,item:t}},answer:function(e,t){return o({vId:e},t)}};t.default=r},194:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return console.log("action set zone"),{type:"ADD_SAMPLE",payload:{sample:e}}}function a(e,t,n){return console.log("action edit item key "+t+" val "+n),{type:"EDIT_ITEM",payload:{item:e,key:t,val:n}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.addSample=r,t.editItem=a;var u=n(187),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(213),c=(0,l.createSample)(),f=(0,l.createSample)(),p=(0,l.createSample)();t.reducer=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o({},s.default.items.asteroidSample,(e={},o(e,c.id,c),o(e,f.id,f),o(e,p.id,p),e)),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"ADD_SAMPLE":return i({},t,o({},s.default.items.asteroidSample,i({},t[s.default.items.asteroidSample],o({},n.payload.sample.id,n.payload.sample))));case"EDIT_ITEM":var r=i({},n.payload.item,{user:i({},n.payload.item.user,o({},n.payload.key,n.payload.val))});return i({},t,o({},n.payload.item.type,i({},t[n.payload.item.type],o({},n.payload.item.id,r))));default:return t}}},211:function(e,t,n){"use strict";function o(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}Object.defineProperty(t,"__esModule",{value:!0}),t.guid=o},212:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=o(s),c=(n(64),n(17),n(230)),f=o(c),p=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement(f.default,null))}}]),t}(l.default.Component);t.default=p},213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSample=void 0;var o=n(237),r=n(211),a=n(187),i=function(e){return e&&e.__esModule?e:{default:e}}(a),u=["iron","cobalt","copper","silver"];t.createSample=function(){var e=(0,o.getRandomItem)(u);return{id:(0,r.guid)(),type:i.default.items.asteroidSample,game:{element:e,weight:10*Math.random()+3},user:{element:null,weight:null}}}},222:function(e,t,n){"use strict";(function(e){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=o(s),c=n(64),f=n(17),p=n(69),d=o(p),m=n(258),y=o(m),h=n(212),v=o(h);"undefined"==typeof window&&(e.window={});var b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log("index constructor "),console.log(y.default),n.store=(0,f.createStore)(y.default,{},(0,f.applyMiddleware)(d.default)),console.log("sub store created"),n}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement(c.Provider,{store:this.store},l.default.createElement("div",null,l.default.createElement(v.default,{game:this.props.game}))))}}]),t}(l.default.Component);t.default=b}).call(t,n(4))},230:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=o(s),c=n(231),f=o(c),p=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement(f.default,null))}}]),t}(l.default.Component);t.default=p},231:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=o(s),c=n(232),f=o(c),p=n(64),d=(n(17),function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log("game props"),console.log(e),n.getFSM=n.getFSM.bind(n),n.state={},n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.getFSM(this.props.zone)}},{key:"componentWillUpdate",value:function(e,t){if(console.log("component will update, is there a different zone? "+(e.zone!==t.fsm.id)),e.zone!==t.fsm.id){var n=e.zone;this.getFSM(n)}}},{key:"getFSM",value:function(e){var t=(0,f.default)(e);this.setState({fsm:t})}},{key:"renderFSM",value:function(){if(this.state.fsm)return l.default.createElement(this.state.fsm.component,{id:this.state.fsm.id,showEntry:!1,factory:f.default})}},{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement("p",null,"current zone: ",this.props.zone),this.renderFSM())}}]),t}(l.default.Component)),m=function(e,t){return{zone:e.game.zone}};t.default=(0,p.connect)(m)(d)},232:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),a=o(r),i=n(235),u=o(i),s=n(236),l=o(s),c=n(238),f=o(c),p=n(239),d=o(p),m=n(240),y=o(m);t.default=function(e){switch(console.log("factory name"+e),e){case u.id:return u;case a.id:return a;case l.id:return l;case f.id:return f;case d.id:return d;case y.id:return y}}},233:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=n(187),b=o(v),g=t.id="lounge",_=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("lounge constructor, props:"),console.log(e),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if(console.log("lounge recieved input state: "),console.log(this.props),"e1"===e.vId)console.log("dispatching change zone"),this.props.setZone(g,"in");else switch(this.props.fsm.state){case"inv":"inv"===e.vId&&this.props.setFSMState(g,r({},b.default.fsm.keys.state,"in"));break;case"in":default:"inv"===e.vId&&this.props.setFSMState(g,r({},b.default.fsm.keys.state,"inv"))}}},{key:"renderView",value:function(){if(console.log("lounge render view: "),console.log(this.props),this.props.showEntry)return[c.default.createElement("div",null,"entry to lounge",c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:"go to lounge"}))];switch(this.props.fsm.state){case"inv":var e=this.props.factory(b.default.fsm.actions.inventory);return[c.default.createElement(e.component,{showEntry:!1,factory:this.props.factory,onInput:this.onInput,vId:"inv"})];case"in":default:var t=this.props.factory("control"),n=this.props.factory(b.default.fsm.actions.inventory);return[c.default.createElement("div",null,"inside lounge",c.default.createElement(t.component,{showEntry:!0,factory:this.props.factory,onInput:this.onInput,vId:"ic"}),c.default.createElement(n.component,{showEntry:!0,factory:this.props.factory,onInput:this.onInput,vId:"inv"}))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),w=function(e){return(0,y.bindActionCreators)({setZone:h.setZone,setFSMState:h.setFSMState},e)},I=function(e,t){return{fsm:(0,d.selectFsmState)(e,g,r({},b.default.fsm.keys.state,"in"))}},O=t.component=(0,m.connect)(I,w)(_);t.default=O},234:function(e,t,n){"use strict";function o(e,t){return e===t}function r(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e(t[r],n[r]))return!1;return!0}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=null,a=null;return function(){return r(t,n,arguments)||(a=e.apply(null,arguments)),n=arguments,a}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];var u=0,s=o.pop(),l=i(o),c=e.apply(void 0,[function(){return u++,s.apply(null,arguments)}].concat(n)),f=a(function(){for(var e=[],t=l.length,n=0;n<t;n++)e.push(l[n].apply(null,arguments));return c.apply(null,e)});return f.resultFunc=s,f.recomputations=function(){return u},f.resetRecomputations=function(){return u=0},f}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.reduce(function(e,t,o){return e[n[o]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=u,t.createStructuredSelector=s;var l=t.createSelector=u(a)},235:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=n(187),b=o(v),g=t.id="control",_=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if(console.log("control recieved input"),console.log(this.props),"e1"===e.vId)this.props.setZone(g,"in");else switch(this.props.fsm.state){case"in":"mine"===e.vId&&this.props.setZone(g,"mine");break;case"mine":"mine"===e.vId&&this.props.setFSMState(g,r({},b.default.fsm.keys.state,"in"))}}},{key:"renderView",value:function(){if(console.log("control render view: "),console.log(this.props),this.props.showEntry)return[c.default.createElement("div",null,c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:"go to control"}))];switch(this.props.fsm.state){case"mine":var e=this.props.factory(b.default.fsm.actions.mine);return[c.default.createElement(e.component,{showEntry:!1,factory:this.props.factory,onInput:this.onInput,vId:"mine"})];case"in":default:var t=this.props.factory("lounge"),n=this.props.factory(b.default.fsm.actions.mine);return[c.default.createElement("div",null,"inside control room",c.default.createElement(t.component,{showEntry:!0,factory:this.props.factory,onInput:this.onInput,vId:"l1"}),c.default.createElement(n.component,{showEntry:!0,factory:this.props.factory,onInput:this.onInput,vId:"mine"}))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),w=function(e){return(0,y.bindActionCreators)({setZone:h.setZone,setFSMState:h.setFSMState},e)},I=function(e,t){return{fsm:(0,d.selectFsmState)(e,g,r({},b.default.fsm.keys.state,"in"))}},O=t.component=(0,m.connect)(I,w)(_);t.default=O},236:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=n(213),b=n(194),g=n(193),_=o(g),w=n(187),I=o(w),O=t.id="mine",S=null,E=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if(console.log("mine input"),console.log(this.props),"e1"===e.vId)S=(0,v.createSample)(),this.props.setFSMState(O,r({},I.default.fsm.keys.state,"in")),this.props.onInput(_.default.message(this.props.vId));else switch(this.props.fsm.state){case"in":"mine"===e.vId?(this.props.addSample(S),this.props.setFSMState(O,r({},I.default.fsm.keys.state,"fin")),S=(0,v.createSample)()):"look"===e.vId?(S=(0,v.createSample)(),this.props.setFSMState(O,r({},I.default.fsm.keys.state,"in"))):"back"===e.vId&&this.props.onInput(_.default.message(this.props.vId));break;case"fin":"in"===e.vId&&this.props.setFSMState(O,r({},I.default.fsm.keys.state,"in"))}}},{key:"renderView",value:function(){if(console.log("mine renderView"),console.log(this.props),this.props.showEntry)return[c.default.createElement("div",null,c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:"mine asteroids"}))];switch(this.props.fsm.state){case"fin":return[c.default.createElement("p",null,"asteroid sample added to inventory"),c.default.createElement(p.default,{vId:"in",onInput:this.onInput,text:"next"})];case"in":default:return[c.default.createElement("p",null,"there is a "+(S.game.weight>8?"large":"small")+" asteroid in front of you, mine it?"),c.default.createElement("div",null,c.default.createElement(p.default,{vId:"mine",onInput:this.onInput,text:"mine it"}),c.default.createElement(p.default,{vId:"look",onInput:this.onInput,text:"look for another"}),c.default.createElement(p.default,{vId:"back",onInput:this.onInput,text:"back"}))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),j=function(e){return(0,y.bindActionCreators)({setFSMState:h.setFSMState,addSample:b.addSample},e)},k=function(e,t){return{fsm:(0,d.selectFsmState)(e,O,r({},I.default.fsm.keys.state,"in"))}},M=t.component=(0,m.connect)(k,j)(E);t.default=M},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getRandomItem=function(e){return e[Math.floor(e.length*Math.random())]}},238:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=n(193),b=o(v),g=n(187),_=o(g),w=t.id="inventory",I=null,O=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if("e1"===e.vId)this.props.setFSMState(w,r({},_.default.fsm.keys.state,"in")),this.props.onInput(b.default.message(this.props.vId));else switch(this.props.fsm.state){case"in":if("back"===e.vId)this.props.onInput(b.default.message(this.props.vId));else if("sample"===e.vId){e.item;this.props.setFSMState(w,r({},_.default.fsm.keys.state,"sample"))}else console.log("item selected "+e.vId),I=e.vId,this.setState({item:item});break;case"sample":"sample"===e.vId&&this.props.setFSMState(w,r({},_.default.fsm.keys.state,"in"))}}},{key:"renderSample",value:function(){var e=this;console.log("invetory render sample");var t=this.props.factory(_.default.fsm.items.asteroidSample);return Object.values(this.props.asteroidSample).map(function(n,o){return console.log("render asteroid sample item "),console.log(n),c.default.createElement(t.component,{item:n,showEntry:!0,factory:e.props.factory,onInput:e.onInput,vId:"sample"})})}},{key:"renderView",value:function(){if(this.props.showEntry)return[c.default.createElement("div",null,c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:"inspect inventory"}))];switch(this.props.fsm.state){case"sample":var e=this.props.factory(_.default.fsm.items.asteroidSample);return[c.default.createElement(e.component,{showEntry:!1,factory:this.props.factory,onInput:this.onInput,vId:"sample"})];case"in":default:return[c.default.createElement("div",null,c.default.createElement(p.default,{vId:"back",onInput:this.onInput,text:"back"})),c.default.createElement("div",null,this.renderSample())]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),S=function(e){return(0,y.bindActionCreators)({setFSMState:h.setFSMState},e)},E=function(e,t){return console.log("mapping asteroid samples"),console.log(e),{fsm:(0,d.selectFsmState)(e,w,r({},_.default.fsm.keys.state,"in")),asteroidSample:e.items.asteroidSample}},j=t.component=(0,m.connect)(E,S)(O);t.default=j},239:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=(n(194),n(193)),b=o(v),g=n(187),_=o(g),w=t.id="idElem",I=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("IdElem constructor, props should have item"),console.log(e),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if("e1"===e.vId)this.props.setFSMState(w,r({},_.default.fsm.keys.state,"in")),this.props.onInput(b.default.message(this.props.vId));else switch(this.props.fsm.state){case"in":"flame"===e.vId?this.props.setFSMState(w,r({},_.default.fsm.keys.state,"flame")):"sonar"===e.vId?this.props.setFSMState(w,r({},_.default.fsm.keys.state,"sonar")):"back"===e.vId&&this.props.onInput(b.default.message(this.props.vId));break;case"flame":case"sonar":this.props.onInput(b.default.answer(this.props.vId,{element:e.vId}))}}},{key:"renderView",value:function(){if(console.log("identify element renderView"),console.log(this.props),this.props.showEntry){var e="element: "+(this.props.item.user.element?this.props.item.user.element:"unknown");return[c.default.createElement("div",null,c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:e}))]}switch(this.props.fsm.state){case"sonar":return[c.default.createElement("p",null,"The sample emites a soundwave of 370Hz"),c.default.createElement("div",null,c.default.createElement(p.default,{vId:"magnesium",onInput:this.onInput,text:"magnesium"}),c.default.createElement(p.default,{vId:"lithium",onInput:this.onInput,text:"lithium"}))];case"flame":return[c.default.createElement("p",null,"The flame is blue, therefore the sample is made of:"),c.default.createElement("div",null,c.default.createElement(p.default,{vId:"iron",onInput:this.onInput,text:"iron"}),c.default.createElement(p.default,{vId:"copper",onInput:this.onInput,text:"copper"}))];case"in":default:return[c.default.createElement("p",null,"The sample element is "+this.props.item.type+" id:"+this.props.item.id),c.default.createElement("div",null,c.default.createElement(p.default,{vId:"flame",onInput:this.onInput,text:"use flame test"}),c.default.createElement(p.default,{vId:"sonar",onInput:this.onInput,text:"use sonar test"}),c.default.createElement(p.default,{vId:"back",onInput:this.onInput,text:"back"}))]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),O=function(e){return(0,y.bindActionCreators)({setFSMState:h.setFSMState},e)},S=function(e,t){return{fsm:(0,d.selectFsmState)(e,w,r({},_.default.fsm.keys.state,"in"))}},E=t.component=(0,m.connect)(S,O)(I);t.default=E},240:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.component=t.id=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(0),c=o(l),f=n(190),p=o(f),d=n(191),m=n(64),y=n(17),h=n(189),v=n(194),b=n(193),g=o(b),_=n(187),w=o(_),I=t.id=w.default.fsm.items.asteroidSample,O=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onInput=n.onInput.bind(n),console.log("@@@@@@@@@@@@@@@@ast samp constructer "),console.log(e),n}return u(t,e),s(t,[{key:"onInput",value:function(e){if(console.log("asteroid sample onInput"),console.log(this.props),"e1"===e.vId)if(this.props.item){var t;console.log("set asteroid sample FSM state "+I+" item "+this.props.item.id),this.props.setFSMState(I,(t={},r(t,w.default.fsm.keys.state,"in"),r(t,w.default.fsm.keys.item,this.props.item.id),r(t,w.default.fsm.keys.itemType,this.props.item.type),t)),this.props.onInput(g.default.item(this.props.vId,this.props.item))}else console.log("error, no item in asteroid sample onInput entry");else switch(this.props.fsm.state){case"in":"aid"===e.vId?this.props.setFSMState(I,r({},w.default.fsm.keys.state,"aid")):"back"===e.vId&&this.props.onInput(g.default.message(this.props.vId));break;case"back":break;case"aid":var n=e.element;console.log("asteroid sample is element "+n+" constant: "+w.default.items.element),console.log(this.props),this.props.editItem(this.props.item,w.default.items.element,n),this.props.setFSMState(I,r({},w.default.fsm.keys.state,"in"))}}},{key:"renderView",value:function(){if(console.log("ast sample renderView"),console.log(this.props),!this.props.item)return c.default.createElement("p",null,"Waiting for item...");if(this.props.showEntry){var e="item: element: "+(this.props.item.user.element?this.props.item.user.element:"unknown");return[c.default.createElement(p.default,{vId:"e1",onInput:this.onInput,text:e})]}switch(this.props.fsm.state){case"aid":var t=this.props.factory(w.default.fsm.questions.idElem);return[c.default.createElement(t.component,{item:this.props.item,showEntry:!1,factory:this.props.factory,onInput:this.onInput,vId:"aid"})];case"in":default:var n=this.props.factory(w.default.fsm.questions.idElem);return[c.default.createElement("p",null,"asteroid sample: ",this.props.item.id,":",c.default.createElement(n.component,{item:this.props.item,showEntry:!0,factory:this.props.factory,onInput:this.onInput,vId:"aid"}),"weight: ",this.props.item.user.weight?this.props.item.user.weight:"unknown"),c.default.createElement(p.default,{vId:"back",onInput:this.onInput,text:"back"})]}}},{key:"render",value:function(){return this.renderView()}}]),t}(c.default.Component),S=function(e){return(0,y.bindActionCreators)({setFSMState:h.setFSMState,editItem:v.editItem},e)},E=function(e,t){console.log("ast sample map state to props"),console.log(e);var n=(0,d.selectFsmState)(e,w.default.fsm.items.asteroidSample,r({},w.default.fsm.keys.state,"in")),o=n[w.default.fsm.keys.item],a=n[w.default.fsm.keys.itemType],i=t.item?t.item:o?e.items[a][o]:null;return console.log("ast samp id: "+o+" type: "+a+"item: "),console.log(i),{fsm:n,item:i}},j=t.component=(0,m.connect)(E,S)(O);t.default=j},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=n(259),a=n(189),i=n(194),u=n(260),s=(0,o.combineReducers)({game:r.reducer,fsm:a.reducer,items:i.reducer}),l=function(e,t){var n=s(e,t);return(0,u.parentReducer)(n,t)};t.default=l},259:function(e,t,n){"use strict";function o(e,t){return{type:"SET_HEALTH",payload:{time:e,temp:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0,t.setHealth=o;var r=n(187),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{health:100,zone:a.default.fsm.zones.lounge};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,e}},260:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.parentReducer=function(e,t){switch(console.log("parent reducer called"),t.type){case"SET_ZONE":return console.log("reducer set zone"),console.log(t),r({},e,{fsm:r({},e.fsm,o({},t.payload.zone,{state:t.payload.state})),game:r({},e.game,{zone:t.payload.zone})});default:return e}return e}}});